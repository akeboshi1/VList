{"version":3,"sources":["file:///D:/workspace/cocosworkspace/dynamicListZip/assets/test/Test.ts"],"names":["_decorator","Component","Label","random","VList","DynamicList","ccclass","property","Test","start","testData","Array","from","length","_","i","cnt","Math","round","height","ceil","dataList","push","data","list","setData","itemRenderer","node","getComponentInChildren","onInstantiate","init","onData","info","get","string","toFixed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;;AAC9BC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;sBAGjBQ,I,WADZF,OAAO,CAAC,MAAD,C,UAEHC,QAAQ;AAAA;AAAA,qC,2BAFb,MACaC,IADb,SAC0BP,SAD1B,CACoC;AAAA;AAAA;;AAAA;AAAA;;AAGhCQ,QAAAA,KAAK,GAAG;AACJ,cAAMC,QAAQ,GAAGC,KAAK,CAACC,IAAN,CAAW;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAAX,EAA2B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAClD,gBAAIC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWf,MAAM,KAAK,EAAX,GAAgB,CAA3B,CAAV;AACA,gBAAIgB,MAAM,GAAG,MAAMF,IAAI,CAACG,IAAL,CAAUJ,GAAG,GAAG,CAAhB,CAAnB;AACA,gBAAIK,QAAkB,GAAG,EAAzB;;AACA,iBAAK,IAAIN,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGC,GAApB,EAAyBD,EAAC,EAA1B,EAA8B;AAC1BM,cAAAA,QAAQ,CAACC,IAAT,CAAcP,EAAC,GAAG,CAAlB;AACH;;AACD,mBAAO;AACHQ,cAAAA,IAAI,EAAEF,QADH;AAEHF,cAAAA;AAFG,aAAP;AAIH,WAXgB,CAAjB,CADI,CAcJ;AACA;AACA;AACA;;AAEA,eAAKK,IAAL,CAAUC,OAAV,CAAkB;AACd;AACAJ,YAAAA,QAAQ,EAAEX,QAFI;AAId;AACAgB,YAAAA,YAAY,EAAE,CAACC,IAAD,EAAOJ,IAAP,KAAgB;AAC1BI,cAAAA,IAAI,CAACC,sBAAL;AAAA;AAAA,kCAAmCH,OAAnC,CAA2CF,IAA3C;AACH,aAPa;AASd;AACAM,YAAAA,aAAa,EAAGF,IAAD,IAAUA,IAAI,CAACC,sBAAL,CAA4BxB,KAA5B,EAA2C0B,IAA3C,CAAgD;AACrEC,cAAAA,MAAM,CAACC,IAAD,EAAO;AACTA,gBAAAA,IAAI,CAACC,GAAL,CAAS,MAAT,EAAiB/B,KAAjB,EAAwBgC,MAAxB,GAAiCF,IAAI,CAACT,IAAL,CAAUY,OAAV,EAAjC;AACH;;AAHoE,aAAhD;AAVX,WAAlB;AAgBH;;AAtC+B,O","sourcesContent":["import { _decorator, Component, Label, random } from 'cc';\r\nimport { VList } from '../core/VList';\r\nimport { DynamicList } from './DynamicList';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Test')\r\nexport class Test extends Component {\r\n    @property(DynamicList)\r\n    list: DynamicList;\r\n    start() {\r\n        const testData = Array.from({ length: 15 }, (_, i) => {\r\n            let cnt = Math.round(random() * 10 + 7);\r\n            let height = 100 * Math.ceil(cnt / 3);\r\n            let dataList: number[] = [];\r\n            for (let i = 0; i < cnt; i++) {\r\n                dataList.push(i + 1);\r\n            }\r\n            return {\r\n                data: dataList,\r\n                height\r\n            }\r\n        });\r\n\r\n        //数据传入格式：{\r\n        //   height:number  该项高度\r\n        //   data:any 该项数据\r\n        // }[]\r\n\r\n        this.list.setData({\r\n            //数据准备，包括指定高度和数据\r\n            dataList: testData,\r\n\r\n            //每个列表项如何渲染\r\n            itemRenderer: (node, data) => {\r\n                node.getComponentInChildren(VList).setData(data)\r\n            },\r\n\r\n            //对象初始化时调用，每个对象只会调用一次\r\n            onInstantiate: (node) => node.getComponentInChildren(VList<number>).init({\r\n                onData(info) {\r\n                    info.get(\"_lbl\", Label).string = info.data.toFixed();\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}